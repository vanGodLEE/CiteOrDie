# 质量报告前端展示说明

## 📍 展示位置

质量报告卡片位于**右侧条款列表面板的顶部**，在"条款列表"标题下方。

### 为什么选择这个位置？

1. **显眼但不突兀**：用户打开结果页面时第一眼就能看到
2. **逻辑相关**：质量报告和条款列表紧密相关
3. **空间合理**：可折叠设计，不占用太多空间
4. **操作便捷**：点击即可展开/收起

## 🎨 UI 设计

### 卡片样式
- **渐变背景**：浅灰到白色的渐变，增加层次感
- **圆角边框**：8px 圆角，现代化设计
- **轻微阴影**：提升视觉层次
- **可折叠**：默认展开，点击标题可收起

### 布局结构
```
┌─────────────────────────────────────┐
│ 📊 质量报告                    ▼   │  ← 标题栏（可点击）
├─────────────────────────────────────┤
│  解析置信度        原文抽取率       │
│  95.0% ████████   87.0% ███████     │  ← 2x2 网格
│                                     │
│  原文定位率        条款定位率       │
│  91.0% ████████   93.0% ████████    │
└─────────────────────────────────────┘
```

### 4个指标展示
每个指标包含：
1. **标签**：灰色小字（11px）
2. **数值**：大字（16px），根据质量等级显示不同颜色
3. **进度条**：4px 细进度条，颜色与数值一致

### 颜色编码（自动判断）
| 质量等级 | 数值范围 | 颜色 | 说明 |
|---------|---------|------|------|
| 优秀 | ≥90% | 🟢 绿色 (#67c23a) | 质量很好 |
| 良好 | 75%-90% | 🔵 蓝色 (#409eff) | 质量不错 |
| 一般 | 60%-75% | 🟠 橙色 (#e6a23c) | 需要注意 |
| 较差 | <60% | 🔴 红色 (#f56c6c) | 需要改进 |

## 🎬 交互效果

### 1. 折叠/展开动画
- **点击标题栏**：切换展开/收起状态
- **箭头图标**：旋转180度动画（0.3s）
- **内容区**：淡入淡出 + 向下滑动动画（0.3s）

### 2. 悬停效果
- **标题栏悬停**：背景变为淡蓝色
- **鼠标指针**：变为手型，提示可点击

## 📊 数据来源

质量报告数据从后端API获取：

```javascript
// 在 loadTaskData() 中
const taskResponse = await api.get(`/api/task/${taskId}`)
qualityReport.value = taskResponse.data.quality_report
```

## 🔧 代码位置

**文件**：`D:\dev\CiteOrDieFrontend\src\views\Result.vue`

**关键代码段**：

1. **模板部分**（第44-97行）：
```vue
<div v-if="qualityReport" class="quality-report-card">
  <div class="quality-header" @click="toggleQualityReport">
    <!-- 标题和箭头 -->
  </div>
  <transition name="slide-fade">
    <div v-show="showQualityReport" class="quality-content">
      <!-- 4个指标，2x2网格 -->
    </div>
  </transition>
</div>
```

2. **脚本部分**（新增）：
```javascript
const qualityReport = ref(null)
const showQualityReport = ref(true) // 默认展开

// 切换展开/收起
const toggleQualityReport = () => {
  showQualityReport.value = !showQualityReport.value
}

// 获取质量等级样式类
const getQualityClass = (value) => { ... }

// 获取进度条颜色
const getProgressColor = (value) => { ... }
```

3. **样式部分**（第385-479行）：
```scss
.quality-report-card { ... }
.quality-header { ... }
.quality-content { ... }
.quality-item { ... }
.quality-value.excellent { color: #67c23a; }
// ... 其他样式
```

## 📱 响应式设计

- **固定宽度**：右侧面板宽度400px，卡片自适应
- **网格布局**：使用 `el-row` 和 `el-col`，自动响应
- **最小空间**：收起时仅占用标题栏高度（约40px）

## 🎯 用户体验

### 优点
✅ **一目了然**：4个指标清晰展示，颜色编码直观  
✅ **节省空间**：可折叠，不影响条款列表浏览  
✅ **自然融合**：位置合理，与条款列表紧密相关  
✅ **视觉吸引**：渐变背景和动画效果提升美观度  

### 使用场景
1. **快速评估**：打开结果页面立即看到质量情况
2. **问题排查**：某个指标偏低时，可以针对性检查
3. **对比分析**：多次分析时，可以对比不同文档的质量

## 🚀 测试步骤

1. **重启前端**：
```bash
cd D:\dev\CiteOrDieFrontend
npm run dev
```

2. **访问结果页面**：
```
http://localhost:5173/result/{task_id}
```

3. **验证功能**：
   - ✅ 质量报告卡片显示在条款列表顶部
   - ✅ 4个指标正确显示数值和进度条
   - ✅ 颜色根据质量等级自动变化
   - ✅ 点击标题可以折叠/展开
   - ✅ 展开/收起有平滑动画

## 📸 预期效果

```
┌────────────────────────────────────────────┐
│  📋 条款列表 (169)                         │
├────────────────────────────────────────────┤
│  📊 质量报告                          ▼   │
│  ┌──────────────┬──────────────┐          │
│  │ 解析置信度   │ 原文抽取率   │          │
│  │ 95.0% 🟢     │ 87.0% 🟢     │          │
│  │ ████████████ │ ██████████   │          │
│  ├──────────────┼──────────────┤          │
│  │ 原文定位率   │ 条款定位率   │          │
│  │ 91.0% 🟢     │ 93.0% 🟢     │          │
│  │ ████████████ │ ████████████ │          │
│  └──────────────┴──────────────┘          │
├────────────────────────────────────────────┤
│  [条款1]                                   │
│  [条款2]                                   │
│  [条款3]                                   │
│  ...                                       │
└────────────────────────────────────────────┘
```

## 💡 未来优化建议

1. **详细说明**：悬停在指标上显示tooltip，解释该指标的含义
2. **趋势对比**：如果有多次分析，显示质量趋势图
3. **导出功能**：将质量报告导出为PDF或图片
4. **问题定位**：点击低分指标，自动跳转到有问题的章节或条款
